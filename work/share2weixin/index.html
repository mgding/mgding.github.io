<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title>document</title>
<script>
var shareToWeixinFriend =  function(data, cb)
{
    if (typeof WeixinJSBridge == 'undefined') {
        alert("没有WeixinJSBridge");
    }
    else {
        WeixinJSBridge.invoke('shareTimeline', {
            'img_url': data.imgurl || '',
            'link': data.url,
            'desc': data.desc,
            'title': data.title
        }, function(d) {
            // 返回res.err_msg取值，d还有一个属性是err_desc
            // share_timeline:cancel 用户取消
            // share_timeline:fail　发送失败
            // share_timeline:confirm 发送成功
            WeixinJSBridge.log(d.err_msg);
            cb && cb(d.err_msg);
        });
    }
    return false;
}
window.onload=function(){
    
    var oBtn = document.getElementById('btn');
    oBtn.onclick=function(){
        shareToWeixinFriend({
            'img_url': 'http://box.mapbar.com/img/index_ico_logo.png',
            'link': 'http://box.mapbar.com/',
            'desc': '一款智能的安全行车伴侣系统，通过即插迷你终端设备及智能app软件，轻松构建手机与汽车的连接桥梁。',
            'title': '图吧汽车卫士'
        })
    }
}
</script>
</head>
<body>
    <button id="btn">分享到微信</button>
</body>
</html>